<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - Ù…ØªØ¬Ø± ÙƒÙŠØ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">

    <div id="login" class="h-screen flex items-center justify-center">
      <div class="bg-white p-6 rounded-xl shadow-md w-80">
        <h2 class="text-xl font-bold mb-4 text-center text-indigo-700">ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
        <input type="password" id="admin-pass" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²" class="w-full border border-gray-300 p-2 rounded mb-4">
        <button onclick="checkPassword()" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">Ø¯Ø®ÙˆÙ„</button>
        <p id="error" class="text-red-500 mt-2 text-sm text-center hidden">âŒ Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­</p>
      </div>
    </div>

    <div id="dashboard" class="p-6 hidden">
      <h1 class="text-2xl font-bold mb-4 text-center text-green-700">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
      <div id="products-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getFirestore, collection, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDC7d17QScA1olu4igkh5yhuwA4p9TwADc",
        authDomain: "kies-store.firebaseapp.com",
        projectId: "kies-store",
        storageBucket: "kies-store.firebasestorage.app",
        messagingSenderId: "1066547080126",
        appId: "1:1066547080126:web:4f0b404675f2d4200527ef",
        measurementId: "G-1GM6ZPV71V"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      async function loadProducts() {
        const container = document.getElementById("products-list");
        container.innerHTML = "";
        const querySnapshot = await getDocs(collection(db, "products"));

        querySnapshot.forEach((docSnap) => {
          const data = docSnap.data();
          const id = docSnap.id;

          const card = document.createElement("div");
          card.className = "bg-white rounded-xl shadow p-4";

          card.innerHTML = `
            <img src="${data.image}" alt="ØµÙˆØ±Ø©" class="w-full h-48 object-cover rounded mb-3" />
            <h3 class="text-lg font-semibold text-indigo-600">${data.name}</h3>
            <p class="text-gray-600 mb-1">${data.description}</p>
            <p class="text-green-600 font-bold mb-2">${data.price} Ø±ÙŠØ§Ù„</p>
            <button onclick="deleteProduct('${id}')" class="bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600">ğŸ—‘ï¸ Ø­Ø°Ù</button>
          `;

          container.appendChild(card);
        });
      }

      window.deleteProduct = async function (id) {
        if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ")) {
          await deleteDoc(doc(db, "products", id));
          loadProducts();
        }
      };

      window.checkPassword = function () {
        const pass = document.getElementById("admin-pass").value;
        if (pass === "salem506") {
          document.getElementById("login").style.display = "none";
          document.getElementById("dashboard").style.display = "block";
          loadProducts();
        } else {
          document.getElementById("error").style.display = "block";
        }
      };
    </script>
  </body>
</html>
